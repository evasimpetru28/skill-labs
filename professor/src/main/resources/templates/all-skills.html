<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Skill Labs - All Skills</title>

	{{>fragments/links}}
	<link rel="stylesheet" href="../static/style/navigation-style.css">
	<link rel="stylesheet" href="../static/style/all-skills-style.css">
	<script src="../static/js/skill-favorites.js"></script>

</head>
<body>
<!--Main Navigation-->
<header>
	{{>fragments/logout-btn}}
	{{>fragments/sidebar}}
</header>
<!--Main Navigation-->

<!--Main layout-->
<main style="margin-top: 50px;">
	<div class="container-fluid container-custom pt-4 table-responsive-lg">
		<h2>All Skills</h2>
		<br>

		{{#noSkills}}
		<div class="no-eval-text d-flex align-items-center justify-content-center">
			<h4>There are no categories or skills defined yet. Please contact an administrator to define them.</h4>
		</div>
		{{/noSkills}}

		{{#categories}}
		<div class="mb-4">
			<div class="d-flex align-items-center mb-2">
				<h3>{{category.name}}</h3>
				{{#category}}
					{{>fragments/show-category-description}}
				{{/category}}
			</div>
			<div class="category-title-separator"></div>
			<div class="row">
				{{#skills}}
					<div class="card col-xl-3 col-lg-4 col-md-5 col-sm-6 col-12 col" 
						style="width: 320px; margin: 1rem 0.5rem; cursor: pointer;"
						onclick="window.location.href='/skill-details/{{id}}/overview/{{superuserId}}'">
						<div class="card-body">
							<div class="d-flex justify-content-between align-items-center">
								<div class="card-title">
									{{name}}
								</div>
								<button class="favorite-btn" onclick="event.stopPropagation(); toggleFavorite('{{id}}')">
									<i class="far fa-bookmark"></i>
								</button>
							</div>
						</div>
					</div>
				{{/skills}}
			</div>
		</div>
		{{/categories}}
	</div>
</main>
<!--Main layout-->

<script>
function toggleFavorite(skillId) {
    const btn = event.currentTarget;
    const icon = btn.querySelector('i');
    
    // Toggle the active class
    btn.classList.toggle('active');
    
    // Toggle between regular and solid bookmark
    if (btn.classList.contains('active')) {
        icon.classList.remove('far');
        icon.classList.add('fas');
    } else {
        icon.classList.remove('fas');
        icon.classList.add('far');
    }
    
    // Here you can add an API call to save the favorite status
    // fetch('/api/skills/' + skillId + '/favorite', {
    //     method: 'POST',
    //     body: JSON.stringify({ isFavorite: btn.classList.contains('active') })
    // });
}
</script>

</body>
</html>